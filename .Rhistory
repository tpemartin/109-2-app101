}
) -> list_minguo
table(unlist(list_minguo))
# 處理 "民國四十九年" 至　＂民國49年＂
ming_pattern <- "民國[卅０一二三四五六七八九十]+年"
character_to_number <- c("3","0":"9","","00")
names(character_to_number) <- c("卅","０","一","二","三","四","五","六","七","八","九","十","百")
character_to_number
for (x in seq_along(list_heritageYears) ){
ming <- str_subset(list_heritageYears[[x]], pattern = ming_pattern)
list_heritageYears[[x]][str_detect(list_heritageYears[[x]],pattern=ming_pattern)] <-
str_replace_all(ming,character_to_number)
}
# 處理 "民國49)年" 至 1950
ming_pattern21 <- "民國[0-9]{1,3}年"
ming_pattern22 <- "(?<=民國)[0-9]{1,3}(?=年)"
for (x in seq_along(list_heritageYears) ){
ming_num <- unlist(str_extract_all(list_heritageYears[[x]], ming_pattern22))
list_heritageYears[[x]][str_detect(list_heritageYears[[x]],pattern=ming_pattern21)] <-
as.character(as.numeric(ming_num) + 1911)
}
View(list_heritageYears)
View(list_heritageYears)
# 處理 "民國四十九年" 至　＂民國49年＂
ming_pattern <- "民國[卅０一二三四五六七八九十]+年"
character_to_number <- c("3","0":"9","","00")
names(character_to_number) <- c("卅","０","一","二","三","四","五","六","七","八","九","十","百")
character_to_number
for (x in seq_along(list_heritageYears) ){
ming <- str_subset(list_heritageYears[[x]], pattern = ming_pattern)
list_heritageYears[[x]][str_detect(list_heritageYears[[x]],pattern=ming_pattern)] <-
str_replace_all(ming,character_to_number)
}
# 處理 "民國49)年" 至 1950
ming_pattern21 <- "民國[0-9]{1,3}[)]年"
ming_pattern22 <- "(?<=民國)[0-9]{1,3}(?=年)"
for (x in seq_along(list_heritageYears) ){
ming_num <- unlist(str_extract_all(list_heritageYears[[x]], ming_pattern22))
list_heritageYears[[x]][str_detect(list_heritageYears[[x]],pattern=ming_pattern21)] <-
as.character(as.numeric(ming_num) + 1911)
}
for (x in seq_along(list_heritageYears) ){
ming_num <- unlist(str_extract_all(list_heritageYears[[x]], ming_pattern22))
list_heritageYears[[x]][str_detect(list_heritageYears[[x]],pattern=ming_pattern21)] <-
as.character(as.numeric(ming_num) + 1911)
}
pattern <- "一[O一二三四五六七八九十]{3}"
purrr::map(
list_heritageYears,
~{
stringr::str_subset(.x, pattern)
}
) -> list_westernYearsInChineseWriting
table(unlist(list_westernYearsInChineseWriting))
xxxx_year <- "一[O一二三四五六七八九十]{3}"
for (x in seq_along(list_heritageYears) ){
xxxx <- str_subset(list_heritageYears[[x]], pattern = xxxx_year)
list_heritageYears[[x]][str_detect(list_heritageYears[[x]],pattern=xxxx_year)] <-
str_replace_all(xxxx,character_to_number)
}
View(list_heritageYears)
View(list_heritageYears)
# 處理 "民國四十九年" 至　＂民國49年＂
ming_pattern <- "民國[卅０一二三四五六七八九十]+年"
character_to_number <- c("3","0","0":"9","","00")
names(character_to_number) <- c("卅","O,"０","一","二","三","四","五","六","七","八","九","十","百")
names(character_to_number) <- c("卅","O","０","一","二","三","四","五","六","七","八","九","十","百")
character_to_number
xxxx_year <- "一[O一二三四五六七八九十]{3}"
for (x in seq_along(list_heritageYears) ){
xxxx <- str_subset(list_heritageYears[[x]], pattern = xxxx_year)
list_heritageYears[[x]][str_detect(list_heritageYears[[x]],pattern=xxxx_year)] <-
str_replace_all(xxxx,character_to_number)
}
View(list_heritageYears)
View(list_heritageYears)
pattern <- "一[O一二三四五六七八九十]{3}"
purrr::map(
list_heritageYears,
~{
stringr::str_subset(.x, pattern)
}
) -> list_westernYearsInChineseWriting
table(unlist(list_westernYearsInChineseWriting))
xxxx_year <- "一[O一二三四五六七八九十]{3}"
for (x in seq_along(list_heritageYears) ){
xxxx <- str_subset(list_heritageYears[[x]], pattern = xxxx_year)
list_heritageYears[[x]][str_detect(list_heritageYears[[x]],pattern=xxxx_year)] <-
str_replace_all(xxxx,character_to_number)
}
character_to_number
View(list_heritageYears)
View(list_heritageYears)
for (x in seq_along(list_heritageYears) ){
xxxx <- str_subset(list_heritageYears[[x]], pattern = xxxx_year)
list_heritageYears[[x]][str_detect(list_heritageYears[[x]],pattern=xxxx_year)] <-
str_replace_all(xxxx,character_to_number)
}
View(list_heritageYears)
View(list_heritageYears)
xxxx_year <- "一[O一二三四五六七八九十]{3}年"
for (x in seq_along(list_heritageYears) ){
xxxx <- str_subset(list_heritageYears[[x]], pattern = xxxx_year)
list_heritageYears[[x]][str_detect(list_heritageYears[[x]],pattern=xxxx_year)] <-
str_replace_all(xxxx,character_to_number)
}
View(list_heritageYears)
View(list_heritageYears)
ming_pattern <- "民國[卅０一二三四五六七八九十]+年"
character_to_number <- c("3","0","0":"9","","00","")
names(character_to_number) <- c("卅","O","０","一","二","三","四","五","六","七","八","九","十","百","年")
character_to_number
xxxx_year <- "一[O一二三四五六七八九十]{3}年"
for (x in seq_along(list_heritageYears) ){
xxxx <- str_subset(list_heritageYears[[x]], pattern = xxxx_year)
list_heritageYears[[x]][str_detect(list_heritageYears[[x]],pattern=xxxx_year)] <-
str_replace_all(xxxx,character_to_number)
}
View(list_heritageYears)
View(list_heritageYears)
xfun::download_file("https://www.dropbox.com/s/vt10xxig64levmj/list_heritageYears.json?dl=1", mode="wb")
list_heritageYears <- jsonlite::fromJSON("list_heritageYears.json")
library(purrr)
library(lubridate)
library(stringr)
library(glue)
purrr::map(
list_heritageYears,
~{
stringr::str_subset(.x, "民國")
}
) -> list_minguo
table(unlist(list_minguo))
# 處理 "民國四十九年" 至　＂民國49年＂
ming_pattern <- "民國[卅０一二三四五六七八九十]+年"
character_to_number <- c("3","0","0":"9","","00","","","","")
names(character_to_number) <- c("卅","O","０","一","二","三","四","五","六","七","八","九","十","百","年","幾","約","餘")
character_to_number
for (x in seq_along(list_heritageYears) ){
ming <- str_subset(list_heritageYears[[x]], pattern = ming_pattern)
list_heritageYears[[x]][str_detect(list_heritageYears[[x]],pattern=ming_pattern)] <-
str_replace_all(ming,character_to_number)
}
# 處理 "民國49年" 至 1950
ming_pattern21 <- "民國[0-9]{1,3}年"
ming_pattern22 <- "(?<=民國)[0-9]{1,3}(?=年)"
for (x in seq_along(list_heritageYears) ){
ming_num <- unlist(str_extract_all(list_heritageYears[[x]], ming_pattern22))
list_heritageYears[[x]][str_detect(list_heritageYears[[x]],pattern=ming_pattern21)] <-
as.character(as.numeric(ming_num) + 1911)
}
purrr::map(
list_heritageYears,
~{
stringr::str_subset(.x, "民國")
}
) -> list_minguo
table(unlist(list_minguo))
# 處理 "民國四十九年" 至　＂民國49年＂
ming_pattern <- "民國[卅０一二三四五六七八九十]+年"
character_to_number <- c("3","0","0","0":"9","","00","","","","")
names(character_to_number) <- c("卅","○","O","０","一","二","三","四","五","六","七","八","九","十","百","年","幾","約","餘")
character_to_number
for (x in seq_along(list_heritageYears) ){
ming <- str_subset(list_heritageYears[[x]], pattern = ming_pattern)
list_heritageYears[[x]][str_detect(list_heritageYears[[x]],pattern=ming_pattern)] <-
str_replace_all(ming,character_to_number)
}
# 處理 "民國49年" 至 1950
ming_pattern21 <- "民國[0-9]{1,3}年"
ming_pattern22 <- "(?<=民國)[0-9]{1,3}(?=年)"
for (x in seq_along(list_heritageYears) ){
ming_num <- unlist(str_extract_all(list_heritageYears[[x]], ming_pattern22))
list_heritageYears[[x]][str_detect(list_heritageYears[[x]],pattern=ming_pattern21)] <-
as.character(as.numeric(ming_num) + 1911)
}
purrr::map(
list_heritageYears,
~{
stringr::str_subset(.x, "民國")
}
) -> list_minguo
table(unlist(list_minguo))
character_to_number
# 處理 "民國四十九年" 至　＂民國49年＂
ming_pattern <- "民國[卅０一二三四五六七八九十]+年"
character_to_number <- c("3","0","0","0":"9","","00","","","","")
names(character_to_number) <- c("卅","○","O","０","一","二","三","四","五","六","七","八","九","十","百","年","幾","約","餘")
character_to_number
for (x in seq_along(list_heritageYears) ){
ming <- str_subset(list_heritageYears[[x]], pattern = ming_pattern)
list_heritageYears[[x]][str_detect(list_heritageYears[[x]],pattern=ming_pattern)] <-
str_replace_all(ming,character_to_number)
}
# 處理 "民國49年" 至 1950
ming_pattern21 <- "民國[0-9]{1,3}"
ming_pattern22 <- "(?<=民國)[0-9]{1,3}"
for (x in seq_along(list_heritageYears) ){
ming_num <- unlist(str_extract_all(list_heritageYears[[x]], ming_pattern22))
list_heritageYears[[x]][str_detect(list_heritageYears[[x]],pattern=ming_pattern21)] <-
as.character(as.numeric(ming_num) + 1911)
}
purrr::map(
list_heritageYears,
~{
stringr::str_subset(.x, "民國")
}
) -> list_minguo
table(unlist(list_minguo))
purrr::map(
list_heritageYears,
~{
stringr::str_subset(.x, "民國[卅０一二三四五六七八九十]+年")
}
) -> list_minguo
table(unlist(list_minguo))
purrr::map(
list_heritageYears,
~{
stringr::str_subset(.x, "民國")
}
) -> list_minguo
table(unlist(list_minguo))
pattern <- "一[O一二三四五六七八九十]{3}"
purrr::map(
list_heritageYears,
~{
stringr::str_subset(.x, pattern)
}
) -> list_westernYearsInChineseWriting
table(unlist(list_westernYearsInChineseWriting))
xxxx_year <- "一[O一二三四五六七八九十]{3}年"
for (x in seq_along(list_heritageYears) ){
xxxx <- str_subset(list_heritageYears[[x]], pattern = xxxx_year)
list_heritageYears[[x]][str_detect(list_heritageYears[[x]],pattern=xxxx_year)] <-
str_replace_all(xxxx,character_to_number)
}
pattern <- "一[O一二三四五六七八九十]{3}"
purrr::map(
list_heritageYears,
~{
stringr::str_subset(.x, pattern)
}
) -> list_westernYearsInChineseWriting
table(unlist(list_westernYearsInChineseWriting))
xxxx_year <- "一[O一二三四五六七八九十]{3}"
for (x in seq_along(list_heritageYears) ){
xxxx <- str_subset(list_heritageYears[[x]], pattern = xxxx_year)
list_heritageYears[[x]][str_detect(list_heritageYears[[x]],pattern=xxxx_year)] <-
str_replace_all(xxxx,character_to_number)
}
pattern <- "一[O一二三四五六七八九十]{3}"
purrr::map(
list_heritageYears,
~{
stringr::str_subset(.x, pattern)
}
) -> list_westernYearsInChineseWriting
table(unlist(list_westernYearsInChineseWriting))
View(list_heritageYears)
View(list_heritageYears)
pattern <- "一[O一二三四五六七八九十]{3}"
purrr::map(
list_heritageYears,
~{
stringr::str_subset(.x, pattern)
}
) -> list_westernYearsInChineseWriting
table(unlist(list_westernYearsInChineseWriting))
pattern <- "一[０O一二三四五六七八九十]{3}"
purrr::map(
list_heritageYears,
~{
stringr::str_subset(.x, pattern)
}
) -> list_westernYearsInChineseWriting
table(unlist(list_westernYearsInChineseWriting))
xxxx_year <- "一[０O一二三四五六七八九十]{3}"
for (x in seq_along(list_heritageYears) ){
xxxx <- str_subset(list_heritageYears[[x]], pattern = xxxx_year)
list_heritageYears[[x]][str_detect(list_heritageYears[[x]],pattern=xxxx_year)] <-
str_replace_all(xxxx,character_to_number)
}
pattern <- "一[０O一二三四五六七八九十]{3}"
purrr::map(
list_heritageYears,
~{
stringr::str_subset(.x, pattern)
}
) -> list_westernYearsInChineseWriting
table(unlist(list_westernYearsInChineseWriting))
jp_period <- "日[治據]時[代期]"
for (x in seq_along(list_heritageYears) ){
jp <- str_subset(list_heritageYears[[x]], pattern = jp_period)
list_heritageYears[[x]][str_detect(list_heritageYears[[x]],pattern=jp_period)] <-
str_replace_all(jp,"日[治據]時[代期]" = "1895-1945")
}
jp_period <- "日[治據]時[代期]"
jp_pattern <- "日[治據]時[代期]" = "1895-1945"
jp_period <- "日[治據]時[代期]"
jp_pattern <- "日[治據]時[代期]" = "1895-1945"
jp_period <- "日[治據]時[代期]"
for (x in seq_along(list_heritageYears) ){
list_heritageYears[[x]][str_detect(list_heritageYears[[x]],pattern=jp_period)] <-
"1895-1945"
}
View(list_westernYearsInChineseWriting)
View(list_westernYearsInChineseWriting)
View(list_heritageYears)
View(list_heritageYears)
character_to_number
# chinese number transfer
function(origin){
character_to_number <- c("3","0","0","0":"9","","00","","","","")
names(character_to_number) <- c("卅","○","O","０","一","二","三","四","五","六","七","八","九","十","百","年","幾","約","餘")
str_replace_all(origin,character_to_number)
}
source(C:/Users/su200/Documents/GitHub/109-2-app101/weekly_progress/yuhong/chinese_number_transfer)
source(C:\Users\su200\Documents\GitHub\109-2-app101\weekly_progress\yuhong\chinese_number_transfer)
source(C:\\Users\su200\Documents\GitHub\109-2-app101\weekly_progress\yuhong\chinese_number_transfer)
ming_pattern <- "民國[卅０一二三四五六七八九十]+年"
.root <- rprojroot::is_rstudio_project$make_fix_file()
source(file.path(.root(),"weekly_progress\yuhong\chinese_number_transfer"),encoding = "UTF-8")
.root <- rprojroot::is_rstudio_project$make_fix_file()
source(file.path(.root(),"weekly_progress/yuhong/chinese_number_transfer"),encoding = "UTF-8")
source('C:/Users/su200/Documents/GitHub/109-2-app101/weekly_progress/yuhong/chinese_number_transfer.R', encoding = 'UTF-8')
source(file.path(.root(),"weekly_progress/yuhong/chinese_number_transfer.R"),encoding = "UTF-8")
ming_pattern <- "民國[卅０一二三四五六七八九十]+年"
.root <- rprojroot::is_rstudio_project$make_fix_file()
source(file.path(.root(),"weekly_progress/yuhong/chinese_number_transfer.R"),encoding = "UTF-8")
# chinese number transfer
chinese_number_transfer <- function(origin){
character_to_number <- c("3","0","0","0":"9","","00","","","","")
names(character_to_number) <- c("卅","○","O","０","一","二","三","四","五","六","七","八","九","十","百","年","幾","約","餘")
str_replace_all(origin,character_to_number)
}
ming_pattern <- "民國[卅０一二三四五六七八九十]+年"
.root <- rprojroot::is_rstudio_project$make_fix_file()
source(file.path(.root(),"weekly_progress/yuhong/chinese_number_transfer.R"),encoding = "UTF-8")
xfun::download_file("https://www.dropbox.com/s/vt10xxig64levmj/list_heritageYears.json?dl=1", mode="wb")
list_heritageYears <- jsonlite::fromJSON("list_heritageYears.json")
library(purrr)
library(lubridate)
library(stringr)
library(glue)
purrr::map(
list_heritageYears,
~{
stringr::str_subset(.x, "民國")
}
) -> list_minguo
table(unlist(list_minguo))
# 處理 "民國四十九年" 至　＂民國49＂
ming_pattern <- "民國[卅０一二三四五六七八九十]+年"
.root <- rprojroot::is_rstudio_project$make_fix_file()
source(file.path(.root(),"weekly_progress/yuhong/chinese_number_transfer.R"),encoding = "UTF-8")
for (x in seq_along(list_heritageYears) ){
ming <- str_subset(list_heritageYears[[x]], pattern = ming_pattern)
list_heritageYears[[x]][str_detect(list_heritageYears[[x]],pattern=ming_pattern)] <-
chinese_number_transfer(ming)
}
# 處理 "民國49" 至 "1950"
ming_pattern21 <- "民國[0-9]{1,3}"
ming_pattern22 <- "(?<=民國)[0-9]{1,3}"
for (x in seq_along(list_heritageYears) ){
ming_num <- unlist(str_extract_all(list_heritageYears[[x]], ming_pattern22))
list_heritageYears[[x]][str_detect(list_heritageYears[[x]],pattern=ming_pattern21)] <-
as.character(as.numeric(ming_num) + 1911)
}
pattern <- "一[０O一二三四五六七八九十]{3}"
purrr::map(
list_heritageYears,
~{
stringr::str_subset(.x, pattern)
}
) -> list_westernYearsInChineseWriting
table(unlist(list_westernYearsInChineseWriting))
xxxx_year <- "一[０O一二三四五六七八九十]{3}"
for (x in seq_along(list_heritageYears) ){
xxxx <- str_subset(list_heritageYears[[x]], pattern = xxxx_year)
list_heritageYears[[x]][str_detect(list_heritageYears[[x]],pattern=xxxx_year)] <-
chinese_number_transfer(xxxx)
}
jp_period <- "日[治據]時[代期]"
for (x in seq_along(list_heritageYears) ){
list_heritageYears[[x]][str_detect(list_heritageYears[[x]],pattern=jp_period)] <-
"1895-1945"
}
View(list_heritageYears)
View(list_heritageYears)
# 民國
purrr::map(
list_heritageYears,
~{
stringr::str_subset(.x, "民國")
}
) -> list_minguo
table(unlist(list_minguo))
# 中文西元年份
pattern <- "一[０O一二三四五六七八九十]{3}"
purrr::map(
list_heritageYears,
~{
stringr::str_subset(.x, pattern)
}
) -> list_westernYearsInChineseWriting
table(unlist(list_westernYearsInChineseWriting))
# "民國四十九年" 至　"民國49"
ming_pattern <- "民國[卅０一二三四五六七八九十百]+年"
for (x in seq_along(list_heritageYears) ){
ming <- str_subset(list_heritageYears[[x]], pattern = ming_pattern)
list_heritageYears[[x]][str_detect(list_heritageYears[[x]],pattern=ming_pattern)] <-
chinese_number_transfer(ming)
}
# "民國49" 至 "1950"
ming_pattern21 <- "民國[0-9]{1,3}"
ming_pattern22 <- "(?<=民國)[0-9]{1,3}"
for (x in seq_along(list_heritageYears) ){
ming_num <- unlist(str_extract_all(list_heritageYears[[x]], ming_pattern22))
list_heritageYears[[x]][str_detect(list_heritageYears[[x]],pattern=ming_pattern21)] <-
as.character(as.numeric(ming_num) + 1911)
}
# 民國
purrr::map(
list_heritageYears,
~{
stringr::str_subset(.x, "民國")
}
) -> list_minguo
table(unlist(list_minguo))
# 中文西元年份
pattern <- "一[０O一二三四五六七八九十]{3}"
purrr::map(
list_heritageYears,
~{
stringr::str_subset(.x, pattern)
}
) -> list_westernYearsInChineseWriting
table(unlist(list_westernYearsInChineseWriting))
# "民國四十九年" 至　"民國49"
ming_pattern <- "民國[卅０一二三四五六七八九十百O○]+年"
for (x in seq_along(list_heritageYears) ){
ming <- str_subset(list_heritageYears[[x]], pattern = ming_pattern)
list_heritageYears[[x]][str_detect(list_heritageYears[[x]],pattern=ming_pattern)] <-
chinese_number_transfer(ming)
}
# "民國49" 至 "1950"
ming_pattern21 <- "民國[0-9]{1,3}"
ming_pattern22 <- "(?<=民國)[0-9]{1,3}"
for (x in seq_along(list_heritageYears) ){
ming_num <- unlist(str_extract_all(list_heritageYears[[x]], ming_pattern22))
list_heritageYears[[x]][str_detect(list_heritageYears[[x]],pattern=ming_pattern21)] <-
as.character(as.numeric(ming_num) + 1911)
}
# 民國
purrr::map(
list_heritageYears,
~{
stringr::str_subset(.x, "民國")
}
) -> list_minguo
table(unlist(list_minguo))
# 中文西元年份
pattern <- "一[０O一二三四五六七八九十]{3}"
purrr::map(
list_heritageYears,
~{
stringr::str_subset(.x, pattern)
}
) -> list_westernYearsInChineseWriting
table(unlist(list_westernYearsInChineseWriting))
View(list_heritageYears)
View(list_heritageYears)
pattern <- "一[０O〇一二三四五六七八九十]{3}"
purrr::map(
list_heritageYears,
~{
stringr::str_subset(.x, pattern)
}
) -> list_westernYearsInChineseWriting
table(unlist(list_westernYearsInChineseWriting))
View(list_heritageYears)
View(list_heritageYears)
# all
list_heritageYears
xxxx_year <- "一[０O○一二三四五六七八九十]{3}"
for (x in seq_along(list_heritageYears) ){
xxxx <- str_subset(list_heritageYears[[x]], pattern = xxxx_year)
list_heritageYears[[x]][str_detect(list_heritageYears[[x]],pattern=xxxx_year)] <-
chinese_number_transfer(xxxx)
}
View(list_heritageYears)
View(list_heritageYears)
# all
list_heritageYears
# 民國
purrr::map(
list_heritageYears,
~{
stringr::str_subset(.x, "民國")
}
) -> list_minguo
table(unlist(list_minguo))
# 中文西元年份
pattern <- "一[０O○一二三四五六七八九十]{3}"
purrr::map(
list_heritageYears,
~{
stringr::str_subset(.x, pattern)
}
) -> list_westernYearsInChineseWriting
table(unlist(list_westernYearsInChineseWriting))
